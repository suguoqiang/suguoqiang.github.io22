<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content=""><meta name="keywords" content=""><meta name="author" content="gqsu"><meta name="copyright" content="gqsu"><title>笔记 | 技术笔记分享</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.7.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.7.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?060ae9ba8fa5be868a3d10fdf6f65af4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="false"><div class="author-info"><div class="author-info__avatar text-center"><img src="http://gallery.gqsu.top/favicon.png"></div><div class="author-info__name text-center">gqsu</div><div class="author-info__description text-center"></div><div class="follow-button"><a href="http://gqsu.top" target="_blank" rel="noopener">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">164</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">39</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">33</span></a></div><hr><div class="author-info-links"><div class="author-info-links__title text-center">友链</div><a class="author-info-links__name text-center" href="https://xclient.info/" target="_blank" rel="noopener">mac</a><a class="author-info-links__name text-center" href="http://cron.qqe2.com/" target="_blank" rel="noopener">cron</a><a class="author-info-links__name text-center" href="https://www.bootschool.net/ascii" target="_blank" rel="noopener">banner</a><a class="author-info-links__name text-center" href="https://www.easyice.cn/" target="_blank" rel="noopener">easyice</a><a class="author-info-links__name text-center" href="http://springcloud.fun/" target="_blank" rel="noopener">springCloud-cn</a><a class="author-info-links__name text-center" href="https://greasyfork.org/zh-CN" target="_blank" rel="noopener">Greasy Fork</a><a class="author-info-links__name text-center" href="https://aotu.io/" target="_blank" rel="noopener">凹凸实验室</a><a class="author-info-links__name text-center" href="https://tgideas.qq.com/#/hot" target="_blank" rel="noopener">腾讯互娱</a><a class="author-info-links__name text-center" href="http://taobaofed.org/" target="_blank" rel="noopener">淘宝FED</a><a class="author-info-links__name text-center" href="http://fex.baidu.com/" target="_blank" rel="noopener">百度FEX</a></div></div></div><nav id="nav" style="background-image: url(http://gallery.gqsu.top/header.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">技术笔记分享</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a><a class="site-page" href="/about">关于我</a><a class="site-page" href="/gallery">相册</a><a class="site-page" href="/slides">时光轴</a></span><span class="pull-right"></span></div><div id="site-info"><div id="site-title">技术笔记分享</div><div id="site-sub-title">笔记</div><div id="site-social-icons"><a class="social-icon" href="https://github.com/suguoqiang" target="_blank" rel="noreferrer noopener nofollow"><i class="fa-github fa"></i></a><a class="social-icon" href="https://weibo.com/2498796682/profile?topnav=1&amp;wvr=6" target="_blank" rel="noreferrer noopener nofollow"><i class="fa-weibo fa"></i></a><a class="social-icon" href="https://Molunerfinn/atom.xml" target="_blank" rel="noreferrer noopener nofollow"><i class="fa-rss fa"></i></a><a class="social-icon" href="http://gallery.gqsu.top/wechat_me.jpg" target="_blank" rel="noreferrer noopener nofollow"><i class="fa-weixin fa"></i></a></div></div></nav><div id="content-outer"><div class="layout" id="content-inner"><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/08/study-%E4%BC%98%E5%8C%96/">网站高并发的优化策略</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-08</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/study/">study</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/study/">study</a></span><div class="content"><h3 id="网站高并发的优化策略"><a href="#网站高并发的优化策略" class="headerlink" title="网站高并发的优化策略"></a>网站高并发的优化策略</h3><h4 id="1-硬件升级"><a href="#1-硬件升级" class="headerlink" title="1.硬件升级"></a>1.硬件升级</h4><p>普通的P4服务器一般最多能支持每天10万独立IP，如果访问量比这个还要大， 那么必须首先配置一台更高性能的专用服务器才能解决问题 ，否则怎么优化都不可能彻底解决性能问题。</p>
<h4 id="2-负载均衡"><a href="#2-负载均衡" class="headerlink" title="2.负载均衡"></a>2.负载均衡</h4><p>它是根据某种负载策略把请求分发到集群中的每一台服务器上，让整个服务器群来处理网站的请求。<br>公司比较有钱的，可以购买专门负责负载均衡的硬件（如：F5）,效果肯定会很好。对于大部分公司，会选择廉价有效的方法扩展整个系统的架构，来增加服务器的吞吐量和处理能力，以及承载能力。</p>
<h4 id="3-服务器集群"><a href="#3-服务器集群" class="headerlink" title="3.服务器集群"></a>3.服务器集群</h4><p>服务器集群就是指将N台服务器集中起来一起进行同一种服务，它们之间通过网络实现通信。让N台服务器之间相互协作，共同承载一个网站的请求压力。<br>在客户端看来就像是只有一个服务器。集群可以利用多个计算机进行并行计算从而获得很高的计算速度，也可以用多个计算机做备份，从而使得任何一个机器坏了整个系统还是能正常运行。</p></div><a class="more" href="/2018/08/08/study-%E4%BC%98%E5%8C%96/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/07/springBoot-%E7%B3%BB%E7%BB%9F%E7%8A%B6%E6%80%81%E7%9B%91%E6%8E%A7/">springBoot-系统状态监控</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/springBoot/">springBoot</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/springBoot/">springBoot</a></span><div class="content"><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>1、引入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>    </span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>如果加入了security依赖，则所有的接口默认都需要被验证，如果只想 /admin路径下的请求进行验证，则需要加入配置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">security.basic.enabled</span>=<span class="string">true</span></span><br><span class="line"><span class="meta">security.basic.path</span>=<span class="string">/admin</span></span><br><span class="line"><span class="meta">security.user.name</span>=<span class="string">admin</span></span><br><span class="line"><span class="meta">security.user.password</span>=<span class="string">password</span></span><br></pre></td></tr></table></figure>

<p>actuator暴露的health接口权限是由两个配置：<code>management.security.enabled</code>和 <code>endpoints.health.sensitive</code>组合的结果进行返回的。</p></div><a class="more" href="/2018/08/07/springBoot-%E7%B3%BB%E7%BB%9F%E7%8A%B6%E6%80%81%E7%9B%91%E6%8E%A7/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/07/springCloud-Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">springCloud-Ribbon负载均衡</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/springCloud/">springCloud</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/springCloud/">springCloud</a></span><div class="content">如果某一个服务部署在在好几台服务器上，那么通过Feign到底去访问哪一台主机呢，这个时候就用到了Ribbon。它的作用是负载均衡，会帮你在每次请求时选择一台机器，均匀的把请求分发到各个机器上。起基本原理是：1)首先，Ribbon会从 Eureka Client里获取到对应的服务注册表，也就知道了所有 ...</div><a class="more" href="/2018/08/07/springCloud-Ribbon%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/#more" style="margin-top: 14px">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/07/springCloud-%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83config/">springCloud-配置中心</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-07</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/springCloud/">springCloud</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/springCloud/">springCloud</a></span><div class="content"><h3 id="SpringCloud配置中心"><a href="#SpringCloud配置中心" class="headerlink" title="SpringCloud配置中心"></a>SpringCloud配置中心</h3><p>开发分布式系统如果还是各个服务配置文件单独配置肯定是不行的，springcloud使用的解决方案是搭建配置中心将并指定一个配置文件路径如git项目对配置文件进行统一管理。<br>在Spring Cloud中，提供了分布式配置中心组件spring cloud config ，它支持配置服务放在配置服务的内存中（即本地），也支持放在远程Git仓库中。<br>在实现cloud config中，主要有两个角色：作为配置中心连接配置路径的 config server,连接配置中心读取配置的config client。</p>
<p>1、引入依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-config-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-eureka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2、开启配置服务器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableConfigServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConfigServerApplication</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(ConfigServerApplication<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a class="more" href="/2018/08/07/springCloud-%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83config/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/07/hexo-MarkDown%E8%AF%AD%E6%B3%95%E4%BD%BF%E7%94%A8/">hexoBlog语法备忘录</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-07</time><div class="content"><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="一级标题"></a>一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="二级标题"></a>二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="三级标题"></a>三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="四级标题"></a>四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="五级标题"></a>五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="六级标题"></a>六级标题</h6><p>hexo常用命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo server &#x2F;&#x2F;本地启动</span><br><span class="line">hexo new page &quot;My New Post&quot;   &#x2F;&#x2F;创建新文章</span><br><span class="line">hexo new &quot;My New Paper&quot;   &#x2F;&#x2F;创建新页面</span><br><span class="line">hexo generate    &#x2F;&#x2F;生成静态文件</span><br><span class="line">hexo deploy    &#x2F;&#x2F;部署到服务器</span><br><span class="line">hexo clean   &#x2F;&#x2F;清除缓存</span><br><span class="line">hexo d -g   &#x2F;&#x2F;生成文件并部署到远程服务器</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在hexo项目根目录下的source文件夹中新建名为 CNAME 没后缀名的文件，</span><br><span class="line">其中内容编辑为你绑定的域名，例如 blog.exrick.cn；</span><br><span class="line">或者在Github设置页面的Github Pages找到Custom domain 填入你的域名</span><br></pre></td></tr></table></figure></div><a class="more" href="/2018/08/07/hexo-MarkDown%E8%AF%AD%E6%B3%95%E4%BD%BF%E7%94%A8/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/06/linux-%E5%AE%89%E8%A3%85MongoDB%E3%80%81RabbitMQ%E3%80%81Git/">linux-安装MongoDB、RabbitMQ、Git</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/linux/">linux</a></span><div class="content"><h3 id="安装MongoDB"><a href="#安装MongoDB" class="headerlink" title="安装MongoDB"></a>安装MongoDB</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> curl <span class="literal">-O</span> https://fastdl.mongodb.org/linux/mongodb<span class="literal">-linux</span><span class="literal">-x86_64</span><span class="literal">-3</span>.<span class="number">0.6</span>.tgz    <span class="comment"># 下载</span></span><br><span class="line"><span class="variable">$</span> tar <span class="literal">-zxvf</span> mongodb<span class="literal">-linux</span><span class="literal">-x86_64</span><span class="literal">-3</span>.<span class="number">0.6</span>.tgz                                   <span class="comment"># 解压</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> mv  mongodb<span class="literal">-linux</span><span class="literal">-x86_64</span><span class="literal">-3</span>.<span class="number">0.6</span>/ /usr/local/mongodb                         <span class="comment"># 将解压包拷贝到指定目录</span></span><br><span class="line"><span class="variable">$</span> export PATH=&lt;mongodb<span class="literal">-install</span><span class="literal">-directory</span>&gt;/bin:<span class="variable">$PATH</span>    <span class="comment">#添加path</span></span><br><span class="line"><span class="variable">$</span> mkdir <span class="literal">-p</span> /<span class="keyword">data</span>/db    <span class="comment">#创建数据库</span></span><br><span class="line"><span class="variable">$</span> ./mongod    <span class="comment">#运行服务</span></span><br></pre></td></tr></table></figure>



<h3 id="安装RabbitMQ"><a href="#安装RabbitMQ" class="headerlink" title="安装RabbitMQ"></a>安装RabbitMQ</h3><p>1、安装：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装epel源[EPEL (Extra Packages for Enterprise Linux，企业版Linux的额外软件包) 是Fedora小组维护的一个软件仓库项目为RHEL/CentOS提供他们默认不提供的软件.]</span></span><br><span class="line"><span class="variable">$</span> rpm <span class="literal">-Uvh</span> https://dl.fedoraproject.org/pub/epel/epel<span class="literal">-release</span><span class="literal">-latest</span><span class="literal">-6</span>.noarch.rpm</span><br><span class="line"><span class="comment"># 扩展erlang源安装最新的erlang</span></span><br><span class="line"><span class="variable">$</span> rpm <span class="literal">-Uvh</span> http://packages.erlang<span class="literal">-solutions</span>.com/erlang<span class="literal">-solutions</span><span class="literal">-1</span>.<span class="number">0</span><span class="literal">-1</span>.noarch.rpm</span><br><span class="line"><span class="variable">$</span> yum <span class="literal">-y</span> install erlang</span><br><span class="line"><span class="comment"># 安装RabbitMQ</span></span><br><span class="line"><span class="variable">$</span> wget http://www.rabbitmq.com/releases/rabbitmq<span class="literal">-server</span>/v3.<span class="number">6.1</span>/rabbitmq<span class="literal">-server</span><span class="literal">-3</span>.<span class="number">6.1</span><span class="literal">-1</span>.noarch.rpm</span><br><span class="line"><span class="variable">$</span> rpm -<span class="literal">-import</span> https://www.rabbitmq.com/rabbitmq<span class="literal">-signing</span><span class="literal">-key</span><span class="literal">-public</span>.asc</span><br><span class="line"><span class="variable">$</span> yum install rabbitmq<span class="literal">-server</span><span class="literal">-3</span>.<span class="number">6.1</span><span class="literal">-1</span>.noarch.rpm</span><br></pre></td></tr></table></figure></div><a class="more" href="/2018/08/06/linux-%E5%AE%89%E8%A3%85MongoDB%E3%80%81RabbitMQ%E3%80%81Git/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/06/study-java%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0(%E4%B8%AD%E7%BA%A7)/">java开发笔记(中级)</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/study/">study</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/study/">study</a></span><div class="content"><h4 id="Navicat可通过设置外键关联，当删除-更新某一主表的记录时，不需要自己在去操作，简化代码"><a href="#Navicat可通过设置外键关联，当删除-更新某一主表的记录时，不需要自己在去操作，简化代码" class="headerlink" title="Navicat可通过设置外键关联，当删除,更新某一主表的记录时，不需要自己在去操作，简化代码"></a>Navicat可通过设置外键关联，当删除,更新某一主表的记录时，不需要自己在去操作，简化代码</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">CASCADE</span><br><span class="line">在父表上update/delete记录时，同步update/delete掉子表的匹配记录 </span><br><span class="line"></span><br><span class="line">SET NULL</span><br><span class="line">在父表上update/delete记录时，将子表上匹配记录的列设为null (要注意子表的外键列不能为not null)  </span><br><span class="line"></span><br><span class="line">NO ACTION</span><br><span class="line">如果子表中有匹配的记录,则不允许对父表对应候选键进行update/delete操作  </span><br><span class="line"></span><br><span class="line">RESTRICT</span><br><span class="line">同no action, 都是立即检查外键约束</span><br><span class="line"></span><br><span class="line">SET NULL</span><br><span class="line">父表有变更时,子表将外键列设置成一个默认的值 但Innodb不能识别</span><br></pre></td></tr></table></figure>

<h4 id="实体类中排除非表中的字段"><a href="#实体类中排除非表中的字段" class="headerlink" title="实体类中排除非表中的字段"></a>实体类中排除非表中的字段</h4><p>1.使用 transient 修饰<br><code>private transient String noColumn;</code></p>
<p>2.使用 static 修饰<br><code>private static String noColumn;</code></p>
<p>3.使用 TableField 注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableField</span>(exist=<span class="keyword">false</span>)</span><br><span class="line"><span class="keyword">private</span> String noColumn;</span><br></pre></td></tr></table></figure></div><a class="more" href="/2018/08/06/study-java%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0(%E4%B8%AD%E7%BA%A7)/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/06/mongodb-%E4%BD%BF%E7%94%A8/">mongodb-使用</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/mongodb/">mongodb</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/mongodb/">mongodb</a></span><div class="content"><h3 id="安装与启动"><a href="#安装与启动" class="headerlink" title="安装与启动"></a>安装与启动</h3><p>官网下载.msi,按照提示完成安装。<br>在安装目录的 <code>data</code>文件夹下，新建db文件夹，用于存放数据。默认为：<code>C:\data\db\</code></p>
<p>正常启动会出现：<br><img src="http://cdn.gqsu.top/mongo01-1.png" alt=""></p>
<blockquote>
<p>如果启动闪退，可以定义.bat文件，然后输入如下内容，避免每次指明db路径</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod.exe --dbpath "D:\Program Files\MongoDB\Server\4.0\data\db"</span><br></pre></td></tr></table></figure></div><a class="more" href="/2018/08/06/mongodb-%E4%BD%BF%E7%94%A8/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/06/redis-%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/">redis--事务处理</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/redis/">redis</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/redis/">redis</a></span><div class="content"><blockquote>
<p>严格意义上讲，redis事物不支持 原子性和持久性（A和D），只支持隔离性和一致性（I和C）。这里的原子性指的是redis的事物操作，不支持事物的回滚，但redis是单线程模型，其本身的普通操作就是原子性的。</p>
</blockquote>
<h3 id="通过MULTI开启事物，然后命令入列，EXEC结束事物"><a href="#通过MULTI开启事物，然后命令入列，EXEC结束事物" class="headerlink" title="通过MULTI开启事物，然后命令入列，EXEC结束事物"></a>通过MULTI开启事物，然后命令入列，EXEC结束事物</h3><p>1、命令行操作：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MULTI</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; SET Book_Name "GIt Pro"</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379&gt; SADD Program_Language "C++" "C#" "Jave" "Python" </span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379&gt; GET Book_Name</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379&gt; EXEC</span><br><span class="line">1) OK</span><br><span class="line">2) (integer) 4</span><br><span class="line">3) "GIt Pro"</span><br></pre></td></tr></table></figure>

<p>2、java代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Transaction transaction = jedis.multi();</span></span><br><span class="line">redisTemplate.multi();</span><br><span class="line">redisTemplate.lpush(<span class="string">"key"</span>, <span class="string">"11"</span>);</span><br><span class="line">redisTemplate.lpush(<span class="string">"key"</span>, <span class="string">"22"</span>);  </span><br><span class="line">redisTemplate.lpush(<span class="string">"key"</span>, <span class="string">"33"</span>);</span><br><span class="line">redisTemplate.exec();</span><br></pre></td></tr></table></figure>
<p>注意一定要在配置文件中，开启事物：</p></div><a class="more" href="/2018/08/06/redis-%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86/#more">阅读更多</a><hr></div><div class="recent-post-item article-container"><a class="article-title" href="/2018/08/06/springCloud-%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/">springBoot--高可用服务实现原理</a><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2018-08-06</time><span class="article-meta"><span class="article-meta__separator">|</span><i class="fa fa-inbox article-meta__icon" aria-hidden="true"></i><a class="article-meta__categories" href="/categories/springCloud/">springCloud</a></span><span class="article-meta tags"><span class="article-meta__separator">|</span><i class="fa fa-tag article-meta__icon" aria-hidden="true"></i><a class="article-meta__tags" href="/tags/springCloud/">springCloud</a></span><div class="content"><h3 id="高可用的设计原则"><a href="#高可用的设计原则" class="headerlink" title="高可用的设计原则"></a>高可用的设计原则</h3><ul>
<li>AKF拆分原则</li>
<li>前后端分离</li>
<li>无状态服务</li>
<li>Restful通信风格</li>
</ul>
<h4 id="AKF拆分原则"><a href="#AKF拆分原则" class="headerlink" title="AKF拆分原则"></a>AKF拆分原则</h4><p>拆分方式：按照不同服务功能进行拆分<br>拆分要点：高内聚，低耦合。一个服务尽量完成一个功能，减少服务间的频繁调用。</p>
<h4 id="前后端分离"><a href="#前后端分离" class="headerlink" title="前后端分离"></a>前后端分离</h4><p>前端专注页面展示，布局以及多场景集成。后端提供统一的数据和模型供前端访问。</p>
<h4 id="无状态服务"><a href="#无状态服务" class="headerlink" title="无状态服务"></a>无状态服务</h4><p>如果一个数据需要被多个服务共享，才能完成一笔交易，那么这个数据被称为状态。进而依赖这个“状态”数据的服务被称为有状态服务，反之称为无状态服务。简单点说就是，应该把缓存的数据迁移到分布式缓存中存储，让业务服务变成一个无状态的计算节点</p></div><a class="more" href="/2018/08/06/springCloud-%E9%AB%98%E5%8F%AF%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86/#more">阅读更多</a><hr></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-chevron-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(http://gallery.gqsu.top/header.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2017 - 2020 By gqsu</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody" target="_blank" rel="noopener"><span>Melody</span></a></div><div class="footer_custom_text">聚合优质内容，捕捉每个瞬间，细品生活滋味,体会百味人生. 小小的站有大大的梦!</div><div class="icp"><a href="http://www.beian.miit.gov.cn/" target="_blank" rel="noopener"><span>苏ICP备19072098号</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_uv"><i class="fa fa-user"></i><span id="busuanzi_value_site_uv"></span><span></span></span><span class="footer-separator">|</span><span id="busuanzi_container_site_pv"><i class="fa fa-eye"></i><span id="busuanzi_value_site_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.7.0"></script><script src="/js/fancybox.js?version=1.7.0"></script><script src="/js/sidebar.js?version=1.7.0"></script><script src="/js/copy.js?version=1.7.0"></script><script src="/js/fireworks.js?version=1.7.0"></script><script src="/js/transition.js?version=1.7.0"></script><script src="/js/scroll.js?version=1.7.0"></script><script src="/js/head.js?version=1.7.0"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>